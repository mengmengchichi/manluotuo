"use strict";define(["cookie"],function(a){function t(){}return t.prototype.init=function(r,t){for(var n=this,o=(t=[],a.getCookie("cookie")),c=""==o?[]:JSON.parse(o),e=1;e<=c.length;e++)t[e-1]=c[e-1].id;console.log(o);var i={};i.id=t,i.act="cart",$.get("http://localhost/www/php/detail.php",i,function(t){t=JSON.parse(t);for(var o=0;o<t.length;o++)for(var e=0;e<c.length;e++)t[o].id===c[e].id&&(t[o].count=c[e].count);console.log(t);var i=r("cartcontent",{data:t});$("#cartbody").html(i),n.action(t)})},t.prototype.action=function(r){var t=a.getCookie("cookie"),n=JSON.parse(t);$(".delthis").on("click",function(){if(confirm("确认移除该商品？")){$("#cartbody tr").remove();var t=$(this).parent().parent().find(".imgurl img").attr("src").split(".")[0].split("/");t=t[t.length-1];for(var o=0;o<r.length;o++)if(r[o].url==t)var e=r[o];for(var i=0;i<n.length;i++)n[i].id==e.id&&a.removeCookie(n[i])}}),$(".actioncart input").on("click",function(){0==$(this).index()?$("#cartbody .choose:checked").parent().parent().remove():1==$(this).index()&&($("#cartbody").find("tr").remove(),$(location).attr("href","/"))})},new t});