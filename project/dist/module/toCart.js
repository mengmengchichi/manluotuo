"use strict";define(["cookie"],function(a){function t(){}return t.prototype.init=function(i,t){for(var r=this,o=(t=[],a.getCookie("cookie")),c=""==o?[]:JSON.parse(o),e=1;e<=c.length;e++)t[e-1]=c[e-1].id;console.log(o);var n={};n.id=t,n.act="cart",$.get("http://localhost/www/php/detail.php",n,function(t){t=JSON.parse(t);for(var o=0;o<t.length;o++)for(var e=0;e<c.length;e++)t[o].id===c[e].id&&(t[o].count=c[e].count);console.log(t);var n=i("cartcontent",{data:t});$("#cartbody").html(n),r.action(t)})},t.prototype.action=function(i){var t=a.getCookie("cookie"),r=JSON.parse(t);$(".delthis").on("click",function(){if(confirm("确认移除该商品？")){$("#cartbody tr").remove();var t=$(this).parent().parent().find(".imgurl img").attr("src").split(".")[0].split("/");t=t[t.length-1],console.log(t);for(var o=0;o<i.length;o++)if(i[o].url==t)var e=i[o];console.log(e);for(var n=0;n<r.length;n++)r[n].id==e.id&&a.removeCookie(r[n])}}),$(".actioncart input").on("click",function(){0==$(this).index()?$("#cartbody .choose:checked").parent().parent().remove():1==$(this).index()&&($("#cartbody").find("tr").remove(),$(location).attr("href","/"))})},new t});