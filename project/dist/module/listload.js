"use strict";define(function(){function e(){this.flag=!0,this.index=1}return e.prototype.listClick=function(e){for(var i=$(".kindlist ul").find("a"),a=0;a<i.length;a++)i.eq(a).attr("id","list"+(a+1));i.on("click",function(e){e.preventDefault(),$(location).attr("href","/html/list.html?"+this.id)})},e.prototype.listload=function(t,i){var n,r=this,a="";$.get("http://localhost/www/php/list.php",{id:i,pageCount:12,index:r.index},function(e){var i=(e=JSON.parse(e)).alldata;e=e.data,n=Math.ceil(i/12);var a=t("list",{data:e});$("#content_con_goods").html(a),r.listClick()}).done(function(){if(r.flag){a+='<a href="javascript:;" id="goprev">上一页</a>';for(var e=1;e<=n;e++)a+=1==e?'<a href="javascript:;" class = "pageclick">'+e+"</a>":'<a href="javascript:;">'+e+"</a>";a+='<a href="javascript:;" id="gonext">下一页</a>',$("#pagechange").html(a),r.index==n?$("#gonext").replaceWith('<span id="gonext">下一页</span>'):$("#gonext").replaceWith('<a href="javascript:;" id="gonext">下一页</a>'),1==r.index?$("#goprev").replaceWith('<span id = "goprev">上一页</span>'):$("#goprev").replaceWith('<a href="javascript:;" id="goprev">上一页</a>'),r.init(n,t,i),r.flag=!1}})},e.prototype.init=function(i,a,t){var n=this;$("#pagechange a").on("click",function(){var e=this.innerHTML;isNaN(Number(e))?"goprev"===this.id?(n.index--,n.index<1&&(n.index=1),$("#pagechange a").eq(n.index).addClass("pageclick").siblings().removeClass("pageclick"),1==n.index?$(this).replaceWith('<span id="goprev">上一页</span>'):($("#gonext").replaceWith('<a href="javascript:;" id="gonext">下一页</a>'),$(this).replaceWith('<a href="javascript:;" id="goprev">上一页</a>'),n.init(i,a,t))):"gonext"===this.id&&(n.index++,n.index>i&&(n.index=i),$("#pagechange").children().eq(n.index).addClass("pageclick").siblings().removeClass("pageclick"),n.index==i?$(this).replaceWith('<span id="gonext">下一页</span>'):($(this).replaceWith('<a href="javascript:;" id="gonext">下一页</a>'),$("#goprev").replaceWith('<a href="javascript:;" id="goprev">上一页</a>'),n.init(i,a,t))):(n.index=Number(e),$(this).addClass("pageclick").siblings().removeClass("pageclick"),n.index==i?$("#gonext").replaceWith('<span id="gonext">下一页</span>'):1==n.index?$("#goprev").replaceWith('<span id = "goprev">上一页</span>'):($("#goprev").replaceWith('<a href="javascript:;" id="goprev">上一页</a>'),$("#gonext").replaceWith('<a href="javascript:;" id="gonext">下一页</a>'),n.init(i,a,t))),n.listload(a,t)})},new e});